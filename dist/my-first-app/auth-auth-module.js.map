{"version":3,"sources":["./src/app/auth/auth.component.ts","./src/app/auth/auth.module.ts","./src/app/auth/auth.component.html"],"names":[],"mappings":"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","file":"auth-auth-module.js","sourcesContent":["import { Component, ComponentFactoryResolver, OnDestroy, ViewChild } from '@angular/core';\r\nimport { NgForm } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { Observable, Subscription } from 'rxjs';\r\nimport { AlertComponent } from '../shared/alert/alert.component';\r\nimport { PlaceholderDirective } from '../shared/placeholder/placeholder.directive';\r\nimport { AuthService, AuthResponseData } from './auth.service';\r\n\r\n@Component({\r\n  selector: 'app-auth',\r\n  templateUrl: './auth.component.html'\r\n})\r\nexport class AuthComponent implements OnDestroy {\r\n  isLoginMode = true;\r\n  isLoading = false;\r\n  error: string = null;\r\n  @ViewChild(PlaceholderDirective, { static: false }) alertHost: PlaceholderDirective;\r\n\r\n  private closeSub: Subscription;\r\n\r\n  constructor(private authService: AuthService, private router: Router, private componentFactoryResolver: ComponentFactoryResolver) {}\r\n\r\n  onSwitchMode() {\r\n    this.isLoginMode = !this.isLoginMode;\r\n  }\r\n\r\n  onSubmit(form: NgForm) {\r\n    if (!form.valid) {\r\n      return;\r\n    }\r\n    const email = form.value.email;\r\n    const password = form.value.password;\r\n\r\n    let authObs: Observable<AuthResponseData>;\r\n\r\n    this.isLoading = true;\r\n    if (this.isLoginMode) {\r\n      authObs = this.authService.login(email, password);\r\n    } else {\r\n      authObs = this.authService.signup(email, password);\r\n    }\r\n    authObs.subscribe(\r\n      resData => {\r\n        console.log(resData);\r\n        this.isLoading = false;\r\n        this.router.navigate(['/recipes']);\r\n      },\r\n      errorMessage => {\r\n        console.log(errorMessage);\r\n        this.error = errorMessage;\r\n        this.showErrorAlert(errorMessage);\r\n        this.isLoading = false;\r\n      }\r\n    );\r\n\r\n    form.reset();\r\n  }\r\n\r\n  onHandleError() {\r\n    this.error = null;\r\n  }\r\n\r\n  private showErrorAlert(message: string) {\r\n    const alertCmpFactory = this.componentFactoryResolver.resolveComponentFactory(AlertComponent);\r\n    const hostViewContainerRef = this.alertHost.viewContainerRef;\r\n    hostViewContainerRef.clear();\r\n\r\n    const componentRef = hostViewContainerRef.createComponent(alertCmpFactory);\r\n\r\n    componentRef.instance.message = message;\r\n    this.closeSub = componentRef.instance.close.subscribe(() => {\r\n      this.closeSub.unsubscribe();\r\n      hostViewContainerRef.clear();\r\n    });\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.closeSub) {\r\n      this.closeSub.unsubscribe();\r\n    }\r\n  }\r\n}\r\n","import { CommonModule } from '@angular/common';\r\nimport { NgModule } from '@angular/core';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { RouterModule } from '@angular/router';\r\nimport { SharedModule } from '../shared/shared.module';\r\nimport { AuthComponent } from './auth.component';\r\n\r\n@NgModule({\r\n  declarations: [AuthComponent],\r\n  imports: [CommonModule, FormsModule, RouterModule.forChild([{ path: '', component: AuthComponent }]), SharedModule]\r\n})\r\nexport class AuthModule {}\r\n","export default \"<ng-template appPlaceHolder></ng-template>\\r\\n<div class=\\\"row\\\">\\r\\n  <div class=\\\"col-xs-12 col-md-6 col-md-offset-3\\\">\\r\\n    <!-- <div class=\\\"alert alert-danger\\\" *ngIf=\\\"error\\\">\\r\\n      <p>{{ error }}</p>\\r\\n    </div> -->\\r\\n    <!-- <app-alert [message]=\\\"error\\\" *ngIf=\\\"error\\\" (close)=\\\"onHandleError()\\\"></app-alert> -->\\r\\n\\r\\n    <div *ngIf=\\\"isLoading\\\" style=\\\"text-align: center\\\">\\r\\n      <app-loading-spinner></app-loading-spinner>\\r\\n    </div>\\r\\n    <form #authForm=\\\"ngForm\\\" (ngSubmit)=\\\"onSubmit(authForm)\\\" *ngIf=\\\"!isLoading\\\">\\r\\n      <div class=\\\"form-group\\\">\\r\\n        <label for=\\\"email\\\">Email</label>\\r\\n        <input type=\\\"email\\\" id=\\\"email\\\" class=\\\"form-control\\\" ngModel name=\\\"email\\\" required email />\\r\\n      </div>\\r\\n      <div class=\\\"form-group\\\">\\r\\n        <label for=\\\"password\\\">password</label>\\r\\n        <input type=\\\"password\\\" id=\\\"password\\\" class=\\\"form-control\\\" ngModel name=\\\"password\\\" required minlength=\\\"6\\\" />\\r\\n      </div>\\r\\n      <div>\\r\\n        <button class=\\\"btn btn-primary\\\" type=\\\"submit\\\" [disabled]=\\\"!authForm.valid\\\">{{ isLoginMode ? 'Login' : 'Sign Up' }}</button> |\\r\\n        <button class=\\\"btn btn-primary\\\" (click)=\\\"onSwitchMode()\\\" type=\\\"button\\\">Switch to {{ isLoginMode ? 'Sign up' : 'Login' }}</button>\\r\\n      </div>\\r\\n    </form>\\r\\n  </div>\\r\\n</div>\\r\\n\";"],"sourceRoot":"webpack:///"}